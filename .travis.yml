language: c

env:
  global:
    - EnableNuGetPackageRestore=true
    - secure: "ELyKUHs/L741xa6Xh5NWtCLB8if0M9f/7mDDrXvpBJI07i+0V0Ku+zi+d0uj46m6MNAPMMQ2rrpVU2cpZQQn2x64bPp9H0r3eGNrdUJkH/Dr6uSaOMJqVHr05BU/S/jtlxaEoTjl9GJsvZfb/woZVprviUxqthLqo8kmgw85dT0="
    - secure: "Sxer2TJAzjbc3OIqJdtF6r9cUpRBNhZYv3v2TtBDyIvTHnsuHTMedbYb9q0z9A2kUgA37b39tRgICD35IkCVq0dc4v+p72lH95K6MoAwg148IMGMNII3V9NEtRnIN/sj0udSVWDOyrBBWz/Kk/twLIg667Lro/kvtuTn5XHHWCE="

install:
  - sudo add-apt-repository ppa:directhex/monoxide -y && sudo apt-get update
  - sudo apt-get install mono-devel mono-gmcs nunit-console
  - mozroots --import --sync

script:
  - xbuild /p:Configuration=Release source/Cucumber.SimpleDb.sln
  - nunit-console source/Cucumber.SimpleDb.Test/bin/Release/Cucumber.SimpleDb.Test.dll
  
after_success:
  - cp -f source/Cucumber.SimpleDb/bin/Release/Cucumber.SimpleDb.dll .
  - echo -e "Host github.com\n\tStrictHostKeyChecking no\n" >> ~/.ssh/config
  - git config --global user.email "travis@travis-ci.org"
  - git config --global user.name "travis-ci"
  - git remote set-url origin git@github.com:rexm/SimpleDb.Net.git
  - git commit Cucumber.SimpleDb.dll -m "Updating binary [ci skip]"
  - git push origin master
  
notifications:
  email:
    - rex@rexmorgan.net
